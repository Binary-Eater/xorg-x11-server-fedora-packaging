From cc3d1a5a6120e721a46c67446ba68f5596055633 Mon Sep 17 00:00:00 2001
From: Piotr Dziwinski <piotrdz@gmail.com>
Date: Sat, 23 Feb 2013 13:14:45 +0100
Subject: [PATCH] glx: fix uninitialized var in __glXDRIscreenProbe

Fixes: https://bugs.freedesktop.org/show_bug.cgi?id=59825

Signed-off-by: Piotr Dziwinski <piotrdz@gmail.com>
Reviewed-by: Keith Packard <keithp@keithp.com>
Signed-off-by: Keith Packard <keithp@keithp.com>
---
 glx/glxdri.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/glx/glxdri.c b/glx/glxdri.c
index da46468..a997e2f 100644
--- a/glx/glxdri.c
+++ b/glx/glxdri.c
@@ -971,6 +971,8 @@ __glXDRIscreenProbe(ScreenPtr pScreen)
     size_t buffer_size;
     ScrnInfoPtr pScrn = xf86ScreenToScrn(pScreen);
 
+    framebuffer.base = NULL;
+
     if (!xf86LoaderCheckSymbol("DRIQueryDirectRenderingCapable") ||
         !DRIQueryDirectRenderingCapable(pScreen, &isCapable) || !isCapable) {
         LogMessage(X_INFO,
-- 
1.8.2.1

