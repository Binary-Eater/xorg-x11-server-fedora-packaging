From 749698f0f4677758349bc652ee12b3a69ae8ca5c Mon Sep 17 00:00:00 2001
From: Adam Jackson <ajax@redhat.com>
Date: Tue, 18 Mar 2008 15:11:13 -0400
Subject: [PATCH] Disable evdev for keyboards even harder.

Hrngh argh hatred.
---
 config/hal.c |   12 ++++++------
 1 files changed, 6 insertions(+), 6 deletions(-)

diff --git a/config/hal.c b/config/hal.c
index 1575422..ec49f2a 100644
--- a/config/hal.c
+++ b/config/hal.c
@@ -174,16 +174,16 @@ device_added(LibHalContext *hal_ctx, const char *udi)
         goto out_error;
     }
     for (i = 0; props[i]; i++) {
-        /* input.keys is the new, of which input.keyboard is a subset, but
-         * input.keyboard is the old 'we have keys', so we have to keep it
-         * around. */
-        if (strcmp(props[i], "input.keys") == 0 ||
-            strcmp(props[i], "input.keyboard") == 0)
-            type |= TYPE_KEYS;
         if (strcmp(props[i], "input.mouse") == 0 ||
             strcmp(props[i], "input.touchpad") == 0)
             type |= TYPE_POINTER;
     }
+    /* XXX skip keyboards.  seriously. */
+    for (i = 0; props[i]; i++) {
+        if (strcmp(props[i], "input.keys") == 0 ||
+            strcmp(props[i], "input.keyboard") == 0)
+            type = TYPE_NONE;
+    }
     libhal_free_string_array(props);
 
     if (type == TYPE_NONE)
-- 
1.5.4.5

