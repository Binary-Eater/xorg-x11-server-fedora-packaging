From 32a51abce25df28d579eb73b42f06cc63741f17b Mon Sep 17 00:00:00 2001
From: Adam Jackson <ajax@redhat.com>
Date: Thu, 8 Jan 2009 10:03:52 -0500
Subject: [PATCH] HACK: Work around broken mtrr.h

---
 hw/kdrive/src/kmap.c                    |    1 +
 hw/xfree86/os-support/linux/lnx_video.c |    1 +
 2 files changed, 2 insertions(+), 0 deletions(-)

diff --git a/hw/kdrive/src/kmap.c b/hw/kdrive/src/kmap.c
index 60e8ae1..537d740 100644
--- a/hw/kdrive/src/kmap.c
+++ b/hw/kdrive/src/kmap.c
@@ -27,6 +27,8 @@
 #include <unistd.h>
 #include <sys/mman.h>
 #ifdef HAVE_ASM_MTRR_H
+typedef unsigned char u8;
+typedef unsigned int u32;
 #include <asm/mtrr.h>
 #endif
 
diff --git a/hw/xfree86/os-support/linux/lnx_video.c b/hw/xfree86/os-support/linux/lnx_video.c
index 688106a..535c3a0 100644
--- a/hw/xfree86/os-support/linux/lnx_video.c
+++ b/hw/xfree86/os-support/linux/lnx_video.c
@@ -44,6 +45,8 @@
 #endif
 
 #ifdef HAS_MTRR_SUPPORT
+typedef unsigned char u8;
+typedef unsigned int u32;
 #include <asm/mtrr.h>
 #endif
 
-- 
1.6.0.3

