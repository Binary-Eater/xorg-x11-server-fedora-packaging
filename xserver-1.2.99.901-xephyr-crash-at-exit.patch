--- xorg-server-1.2.99.901/GL/mesa/X/xf86glx.c.jx	2007-03-07 14:15:25.000000000 -0500
+++ xorg-server-1.2.99.901/GL/mesa/X/xf86glx.c	2007-03-13 14:27:38.000000000 -0400
@@ -281,12 +281,14 @@
     __GLXMESAscreen *mesaScreen = (__GLXMESAscreen *) screen;
     int i;
 
-    for (i = 0; i < mesaScreen->num_vis; i++) {
-	if (mesaScreen->xm_vis[i])
-	    XMesaDestroyVisual(mesaScreen->xm_vis[i]);
-    }
+    if (mesaScreen->xm_vis) {
+	for (i = 0; i < mesaScreen->num_vis; i++) {
+	    if (mesaScreen->xm_vis[i])
+		XMesaDestroyVisual(mesaScreen->xm_vis[i]);
+	}
 
-    xfree(mesaScreen->xm_vis);
+	xfree(mesaScreen->xm_vis);
+    }
 
     __glXScreenDestroy(screen);
 
